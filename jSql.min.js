(function(u,j){var r=function(d,e){var a;if(d!==j&&null!==d)for(a in e)e.hasOwnProperty(a)&&d!==e[a]&&e[a]!==j&&(d.element&&e!==this?d.element[a]=e[a]:d[a]=e[a]);else return e;return d},s=function(){for(var d=Array.prototype.slice.call(arguments),e=[],a=d.length,b=0;d[b]&&!d[b].length;)b++;if(d[b])for(;b<a;b++)Array.prototype.push.apply(e,d[b]);return e},o=function(d,e,a){var b,c;d&&(c=function(){return a?function(a,b){return a>b}:function(a,b){return a<b}}(),e&&(d=t.from(d).select(e)),t.forEach(d,
function(a){if(!b||c(this[a],b))b=this[a]},!0));return b},t=function(){var d=function(a){return new d.prototype.Instance(a)},e=function(a,b){var c=Array.prototype.slice.call(arguments);return d.prototype[a].apply(b,c)};d.prototype={constructor:d,Instance:function(a,b){this.element=a;this.type=!b?d.detectType(a):b;this.length=d.count(a);return this},forEach:function(a){return d.forEach(this,a,!0)},map:function(a){var b,c=d(this.isArray()?[]:{});this.forEach(function(d){b=a.call(self,this[d],d);null!=
b&&c.add(b,d)});return d(c.element)},filter:function(a){var b,c=this,f=d(this.isArray()?[]:{});this.forEach(function(d){b=a.call(c,this[d],d);null!=b&&!1!==b&&f.add(this[d])});return d(f.element)},add:function(a,b){this.element=d.add(this.element,a,b);this.length++;return this},select:function(a,b){var c,f=d(),k=0,g=0,e;if(a)if(c=a.split(" "),"document"===this.type)for(k=c.length;g<k;g++)(e=this.getElement(c[g],!0))&&(d.isSingleObj(e)?f.add(e,c[g]):f=f.merge(e));else if(!b&&"array"===this.type){f=
d([]);for(k=c.length;g<k;g++)f=f.merge(this.map(function(a,b,d){if(c[g]===b.toString())return a;d=a.getElementsByTagName?a.getElementsByTagName(c[g])[0]:"";if(a.nodeType&&d)return d;if(a[c[g]])return a[c[g]]}).element)}else return this.map(function(a,b){if(-1!==c.indexOf(b.toString()))return a});return f},where:function(a,b){var c,f,k,e,q,p,l,h,i,j=this,n=function(a){q=-1!==a.indexOf(">")?">":-1!==a.indexOf("<")?"<":"=";a=a.split(/>|=|</g);k=a[0];e=a[1];e=-1!==e.indexOf("'")?e.replace(/\'/g,""):parseInt(e,
10);p="<"===q?function(a){return a<e}:">"===q?function(a){return a>e}:function(a){return a===e}},m=function(a){return j[a](function(b,c,f){var v;if(b.nodeType)if(f=b.getElementsByTagName(k),"*"!==k){if(v=(f=d.getTextContent(f[0]))?f:b[k],f=v,p(f))return f}else{for(var c=0,e=f.length,g;c<e;c++)if(g=(g=d.getTextContent(f[c]))?g:b[k],!p(g))return;return b}else if(shouldReturnVal="*"===k||"*"!==k&&c.toString()===k?p(b):"all"===a?b:"")return b})};if(a)if(a.split(/&&|\|\|+/),c=-1!==a.indexOf("&&")?a.split(/\s?&&\s?/g):
"",f=-1!==a.indexOf("||")?a.split(/\s?\|\|\s?/g):"",!c&&!f)if(n(a),b){if(m("all"))return this}else return m("filter");else if(c)if(b){i=!0;for(h=0,l=c.length;h<l;h++)if(n(c[h]),!m("all")){i=!1;break}}else{i=d([]);for(h=0,l=c.length;h<l;h++){n(c[h]);i.tmpElement=m("filter").element;if(0===i.tmpElement.length){i=!1;break}i.merge(i.tmpElement)}if(i)return i}else if(f)if(b)for(h=0,l=f.length;h<l;h++)n(f[h]),i=i||m("all");else{i=d([]);for(h=0,l=f.length;h<l;h++)n(f[h]),i.merge(m("filter").element);return i}return i?
this:d([])},whereAll:function(a){return this.where(a,!0)},orderBy:function(a,b){var c=function(a,b){return a<b?f?-1:1:a>b?f?1:-1:0},f,e=[],g,j;if(this.element.sort)if(!b&&("asc"===a||"desc"===a))f="asc"===a||!a?1:0,this.element.sort(c);else if(d.isFunction(a))this.element.sort(a||c);else{f="desc"===b?0:1;e=a.split(" ");for(g=e.length,j=0;j<g;j++)this.element.sort(function(a,b){return c(a[e[j]],b[e[j]])})}return this},all:function(a){return a?this.length===this.filter(a).length:!1},any:function(a){return a?
0<this.filter(a).length:!1},first:function(){var a=this.element;if(a)return a.length?d(a[0]):d(d.objToArray(a)[0])},last:function(){var a=this.element;if(a)return a.length||(a=d.objToArray(a)),d(a[a.length-1])},take:function(a){var b,c=this.element.length;if(a&&c){c=a>c?c:a;for(b=0,a=[];b<c;b++)a.push(this.element[b]);return d(a)}return this},skip:function(a){var b,c=this.element.length;if(a&&c){b=[];if(a<c)for(;a<c;a++)b.push(this.element[a]);else return d([]);return d(b)}return this},distinct:function(a){var b=
this,c="array"===b.type?d([]):d({}),f=c.element;a&&(b=b.select(a));b.forEach(function(a){var b=this[a];c.contains(b)||d.add(f,b,a)});return c},contains:function(a){return d.contains(this.element,a)},equals:function(a){return d.equals(this.element,a)},count:function(){return this.length=d.count(this.element)},sum:function(a){return d.sum(this,a)},min:function(a){return o(this,a)},max:function(a){return o(this,a,!0)},merge:function(a,b,c){var f=d.detectType(a),e=b!==j?d.detectType(b):d.detectType(this.element);
if(!b)b=a,a=this.element,c=f,f=e,e=c;a="number"===e||"string"===e?d.add(a,b,"0"):"array"===f&&"array"===e?s(a,b):"array"===f&&"multiObj"===e?s(a,d.objToArray(b)):r(a,b);return c?this.Instance(a,this.type):a},getElement:function(a,b){var c;if(a!==j&&(a=a.toString(),"document"===this.type&&(c=a[0],c="#"===c?[this.element.getElementById(a.slice(1))]:"."===c?Array.prototype.slice.call(this.element.getElementsByClassName(a.slice(1))):Array.prototype.slice.call(this.element.getElementsByTagName(a))),!c||
!c.length))c=this.element[a];return c!==j?c:b?j:this.element},isArray:function(){return"[object Array]"===Object.prototype.toString.call(this.element)?"array":""},isSingleObj:function(){return"string"===typeof this.element?"string":!isNaN(this.element)?"number":""},isFunction:function(){return"[object Function]"===Object.prototype.toString.call(this.element)?"function":""},isDocument:function(){return this.element&&this.element.nodeType?"document":""},getTextContent:function(a){if(a=this.getElement?
this.getElement(a):this.element)return a.innerText||a.textContent}};d.prototype.Instance.prototype=d.prototype;r(d,{from:function(a){return a.constructor!==d?d(a):a},isArray:function(a){return e("isArray",{element:a})},isSingleObj:function(a){return e("isSingleObj",{element:a})},isFunction:function(a){return e("isFunction",{element:a})},isDocument:function(a){return e("isDocument",{element:a})},detectType:function(a){var b=this.isArray(a);return b?b:(b=this.isDocument(a))?b:(b=this.isFunction(a))?
b:(b=this.isSingleObj(a))?b:"multiObj"},merge:function(a,b,c){a=d.prototype.merge(a,b);return c!==j?d(a):a},forEach:function(a,b,c){var f,e,c=c?a.element:a;if(c.length&&!d.isFunction(c))for(f=0,e=c.length;f<e&&!(!1===b.call(c,f));f++);else for(f in c)if(!1===b.call(c,f))break;return a},add:function(a,b,c){if(a)return a.push?a.push(b):a[c]=b,a;return c?(a={},a[c]=b,a):b},contains:function(a,b){var c=!1;if(a&&a.indexOf)return-1!==a.indexOf(b);d.forEach(a,function(a){if(this[a]===b)return c=!0,!1});
return c},equals:function(a,b){var c=!0;d.forEach(a,function(d){if(a[d]!==b[d])return c=!1});return c},sum:function(a,b){var c;a&&(b&&(a=d.from(a).select(b)),d.forEach(a,function(a){c=c?c+this[a]:this[a]},!0));return c},min:function(a,b){return o(a,b)},max:function(a,b){return o(a,b,!0)},arrayToObj:function(a){a.length||(a=[a]);for(var b={},c=a.length,d=0;d<c;b[d.toString()]=a[d++]);return b},objToArray:function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(a[b]);c.length||c.push(a);return c},
count:function(a){var b=0,c;if(a){if(a.length)return a.length;for(c in a)a.hasOwnProperty(c)&&b++;return b?b:1}return 0},getTextContent:function(a,b){return e("getTextContent",{element:a},b)}});return u.jSql=d}()})(window);